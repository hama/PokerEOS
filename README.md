# PokerEOS

在使用此网页工具之前，请仔细阅读以下说明。您可以按照如下步骤，自行开发程序验证。

随机牌型如何生成？
PokerEOS平台游戏均采用基于智能合约的随机数生成技术，算法完全在EOS智能合约中运行，平台无法干预。随机牌型算法如下，用户可自行校验结果真实性。
（sha256（sign（sha256（ gameid + playerseed + timestamp））））
gameid：用户投注的ID
playerseed：用户自行设置的随机数种子
timestamp：用户投注的时间戳
登录操作使用智能合约中预留的公钥对应的私钥进行签名，签名后可通过公钥进行验证
一、解析下注记录的memo
在区块链浏览器（如eosflare：https://eosflare.io/ ）查询您下注的转账记录，查看其memo信息。
memo信息是以”,“字符将信息连接起来的字符串,
类似“(bet:64000,seed:b23cM26etDf6J7rdHJiS,ref:ha3da23n2zye)”:  
其结构如下： 投注底注,玩家种子,推荐人
	第一个信息：bet:投注底注；
	第二个信息：seed:本局用户提交的种子；
	第三个信息：ref:推荐人账号，若玩家不存在推荐人则显示为none；
二、查询开奖记录
在 https://eosflare.io/ 自己账号的记录中找到类型为“pokereosgame - reveal”的交易记录，只要“playerSeed”与自己投注记录memo中的第二个信息（种子）相同，即为对应的开奖记录，如下图所示：
 
三、验证签名
验证签名需要使用PokerEOS的公钥“public_key”对开奖记录中的种子哈希值hashSeed及其签名“signature”进行ecc签名验证，验证结果通过并且签名等同于memo中的本局用户提交的种子即可证明服务器种子未被篡改。
四、计算开奖结果
使用开奖记录的签名“signature”进行 SHA256 运算，得到 A = sha256(signature)（32位长度的uint8数组），使用该数组即可完成发牌。
牌组的排序及相关值如下所示（52位长度的一维数组）：
	0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0A,0x0B,0x0C,0x0D, //方块 A - K
	0x11,0x12,0x13,0x14,0x15,0x16,0x17,0x18,0x19,0x1A,0x1B,0x1C,0x1D, //梅花 A - K
	0x21,0x22,0x23,0x24,0x25,0x26,0x27,0x28,0x29,0x2A,0x2B,0x2C,0x2D, //红桃 A - K
	0x31,0x32,0x33,0x34,0x35,0x36,0x37,0x38,0x39,0x3A,0x3B,0x3C,0x3D //黑桃 A - K
发牌逻辑，总共需要发十张牌，每张牌在牌组中的位置按照如下公式计算得出，算出结果后将该牌从牌组中移出以便计算下一张牌的位置：
(A[0])%剩余牌的张数(52) 作为玩家第一张牌位置，从牌组中取出。
(A[1])%剩余牌的张数(51) 作为庄家第一张牌位置，从牌组中取出。
(A[2])%剩余牌的张数(50) 作为玩家第二张牌位置，从牌组中取出。
(A[3])%剩余牌的张数(49) 作为庄家第二张牌位置，从牌组中取出。
(A[4])%剩余牌的张数(48) 作为玩家第三张牌位置，从牌组中取出。
(A[5])%剩余牌的张数(47) 作为庄家第三张牌位置，从牌组中取出。
(A[6])%剩余牌的张数(46) 作为玩家第四张牌位置，从牌组中取出。
(A[7])%剩余牌的张数(45) 作为庄家第四张牌位置，从牌组中取出。
(A[8])%剩余牌的张数(44) 作为玩家第五张牌位置，从牌组中取出。
(A[9])%剩余牌的张数(43) 作为庄家第五张牌位置，从牌组中取出。

